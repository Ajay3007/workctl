<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.workctl.gui.controller.MainController">

    <left>
        <VBox styleClass="sidebar-root" prefWidth="228">

            <!-- ── Projects: header ── -->
            <HBox styleClass="sidebar-header" alignment="CENTER_LEFT" spacing="6">
                <Label text="Projects" styleClass="sidebar-title"/>
                <Label fx:id="projectCountLabel" text="" styleClass="sidebar-count"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="themeToggleBtn"
                        text="&#9728;"
                        styleClass="theme-toggle"
                        onAction="#handleThemeToggle"/>
            </HBox>

            <!-- ── New Project button ── -->
            <VBox style="-fx-padding: 10 12 6 12;">
                <Button text="+ New Project"
                        onAction="#handleCreateProject"
                        maxWidth="Infinity"
                        styleClass="new-project-btn"/>
            </VBox>

            <!-- ── Project card list ── -->
            <ScrollPane fx:id="projectScroll"
                        styleClass="project-scroll"
                        VBox.vgrow="ALWAYS"
                        fitToWidth="true"
                        hbarPolicy="NEVER">
                <VBox fx:id="projectListVBox"
                      spacing="5"
                      style="-fx-padding: 0 8 8 8;"/>
            </ScrollPane>

            <!-- ── Delete Project button ── -->
            <VBox style="-fx-padding: 6 12 8 12;">
                <Button fx:id="deleteProjectBtn"
                        text="Delete Project"
                        onAction="#handleDeleteProject"
                        maxWidth="Infinity"
                        styleClass="delete-project-btn"/>
            </VBox>

            <!-- ════════════════════════════════════════════════ -->
            <!-- ── Meetings section ── -->
            <!-- ════════════════════════════════════════════════ -->
            <Separator/>

            <!-- Meetings header -->
            <HBox styleClass="sidebar-header" alignment="CENTER_LEFT" spacing="6"
                  style="-fx-padding: 10 14 8 14;">
                <Label text="Meetings" styleClass="sidebar-title"/>
                <Label fx:id="meetingCountLabel" text="" styleClass="sidebar-count"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="+"
                        styleClass="theme-toggle"
                        onAction="#handleCreateMeetingQuick"
                        style="-fx-font-size: 16; -fx-font-weight: bold;"/>
            </HBox>

            <!-- Meeting card list (compact, fixed height) -->
            <ScrollPane fx:id="meetingScroll"
                        styleClass="project-scroll"
                        prefHeight="165"
                        fitToWidth="true"
                        hbarPolicy="NEVER">
                <VBox fx:id="meetingListSidebarVBox"
                      spacing="4"
                      style="-fx-padding: 0 8 6 8;"/>
            </ScrollPane>

            <!-- ════════════════════════════════════════════════ -->
            <!-- ── Interviews section ── -->
            <!-- ════════════════════════════════════════════════ -->
            <Separator/>

            <!-- Interviews header -->
            <HBox styleClass="sidebar-header" alignment="CENTER_LEFT" spacing="6"
                  style="-fx-padding: 10 14 8 14;">
                <Label text="Interviews" styleClass="sidebar-title"/>
                <Label fx:id="interviewCountLabel" text="" styleClass="sidebar-count"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="+"
                        styleClass="theme-toggle"
                        onAction="#handleCreateInterviewQuick"
                        style="-fx-font-size: 16; -fx-font-weight: bold;"/>
            </HBox>

            <!-- Interview card list (compact, fixed height) -->
            <ScrollPane fx:id="interviewScroll"
                        styleClass="project-scroll"
                        prefHeight="150"
                        fitToWidth="true"
                        hbarPolicy="NEVER">
                <VBox fx:id="interviewListSidebarVBox"
                      spacing="4"
                      style="-fx-padding: 0 8 6 8;"/>
            </ScrollPane>

        </VBox>
    </left>

    <center>
        <!-- AI Agent + Weekly Report tabs are added programmatically in MainController.initialize() -->
        <TabPane fx:id="mainTabPane" styleClass="main-tab-pane">
            <Tab text="Tasks" closable="false">
                <fx:include source="tasks.fxml" fx:id="tasksView"/>
            </Tab>

            <Tab text="Logs" closable="false">
                <fx:include source="logs.fxml" fx:id="logsView"/>
            </Tab>

            <Tab text="Stats" closable="false">
                <fx:include source="stats.fxml" fx:id="statsView"/>
            </Tab>

            <Tab text="Meetings" closable="false">
                <fx:include source="meetings.fxml" fx:id="meetingsView"/>
            </Tab>

            <Tab text="Interview" closable="false">
                <fx:include source="interview.fxml" fx:id="interviewView"/>
            </Tab>
        </TabPane>
    </center>

</BorderPane>
